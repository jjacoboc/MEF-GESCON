<ui:composition 

    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

    <script type="text/javascript">
        //<![CDATA[
        function manejarLogin(xhr, status, args) {
            if (!args.validationFailed && args.estaLogeado) {
                setTimeout(function () {
                    window.location = args.view;
                }, 500);
            }
        }
        function logout() {
            setTimeout(function () {
                window.location = "/gescon/index.xhtml";
            }, 500);
        }
        //]]>
    </script>
    <div id="layout-topbar">
        <div id="layout-topbar-indent">
            <h:form id="headerForm">
                <p:link outcome="/index.xhtml" rendered="#{loginMB.user ne null and loginMB.perfil.nperfilid ne msgs.administrador}">
                    <h:graphicImage name="logo_gescon_2.jpg" styleClass="Fleft" library="images" class="Fleft" width="200px;" height="50px;"/>
                </p:link>
                <p:link outcome="/pages/indexAdmin.xhtml" rendered="#{loginMB.user ne null and loginMB.perfil.nperfilid eq msgs.administrador}">
                    <h:graphicImage name="logo_gescon_2.jpg" styleClass="Fleft" library="images" class="Fleft" width="200px;" height="50px;"/>
                </p:link>
                <p:link outcome="/index.xhtml" rendered="#{loginMB.user eq null}">
                    <h:graphicImage name="logo_gescon_2.jpg" styleClass="Fleft" library="images" class="Fleft" width="230px;" height="60px;"/>
                </p:link>
                <a href="#" id="mobile-menu-button" class="BordRad3 white ShowOnMobile"><i class="fa fa-bars"></i> Menu</a>
                <a href="#" id="mobile-menu-button-gray" class="BordRad3 white ShowOnMobile"><i class="fa fa-caret-down"></i> Top Menu</a>
                <ul id="layout-topbar-menu">
                    <h:panelGroup rendered="#{loginMB.user ne null}">
                        <li>
                            <a class="Animated05 CursPointer">
                                <h:panelGroup>
                                    <i class="fa fa-user"></i>
                                    <p:spacer width="3"/>
                                    <h:outputText value="#{loginMB.user.vnombres}" />
                                    <p:spacer width="3"/>
                                    <h:outputText value="#{loginMB.user.vapellidos}"/>
                                    <h:outputText value=", Bienvenido" />
                                    <i class="fa fa-chevron-down Fs14 Fright ShowOnMobile"></i>
                                </h:panelGroup>
                            </a>
                            <ul style="width:185px; margin-left:-10px;" class="Animated03 submenu">
                                <li><a class="Animated05"><i class="fa fa-user Fs30 Fleft"></i> <span class="Fright Fs20 TexAlRight">#{loginMB.user.vnombres} #{loginMB.user.vapellidos}<span class="Fs10 DispBlock">#{loginMB.perfil.vnombre}</span></span></a></li>
                                <li><a href="#" class="Animated05"><i class="fa fa-dashboard"></i> Mi Perfil</a></li>
                                <li><a href="#" class="Animated05"><i class="fa fa-key"></i> Cambiar Contraseña</a></li>
                                <li class="Animated05"><p:commandLink actionListener="#{loginMB.logout}" oncomplete="logout();" styleClass="Unselectable"><i class="fa fa-sign-out"/> Cerrar Sesión </p:commandLink></li>
                            </ul>
                        </li>
                        <li class="fa fa-ellipsis-v menu-separator"></li>
                        <li>
                            <h:panelGroup rendered="#{loginMB.notificaciones gt 0}">
                                <a class="Animated05 CursPointer"><i class="fa fa-bell animated swing infinite red"></i> Bandeja de Notificaciones <span class="notification-bubble BordRad3 animated rubberBand">#{loginMB.notificaciones}</span> <i class="fa fa-chevron-down Fs14 Fright ShowOnMobile"></i></a>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{loginMB.notificaciones eq 0}">
                                <a class="Animated05 CursPointer"><i class="fa fa-bell"></i>Bandeja de Notificaciones <i class="fa fa-chevron-down Fs14 Fright ShowOnMobile"></i></a>
                            </h:panelGroup>
                            <ul style="width:200px; margin-left:0px;" class="Animated03 submenu">
                                <li>
                                    <p:commandLink styleClass="Animated05" actionListener="#{loginMB.loadAssignedPanel}" oncomplete="PF('asgDialog').show();" update=":asgDialogForm:pgAsg">
                                        <h:panelGroup rendered="#{loginMB.notificacionesAsignadas eq 0}"><i class="fa fa-envelope Fs18 gray"></i></h:panelGroup>
                                        <h:panelGroup rendered="#{loginMB.notificacionesAsignadas gt 0}"><i class="fa fa-envelope Fs18 blue animated infinite rubberBand"></i></h:panelGroup>
                                        <span class="Fright Fs16 TexAlRight">Asignadas<span class="Fs10 DispBlock">#{loginMB.notificacionesAsignadas} por recibir</span></span>
                                    </p:commandLink>
                                </li>
                                <li>
                                    <p:commandLink styleClass="Animated05" actionListener="#{loginMB.loadReceivedPanel}" oncomplete="PF('rcbDialog').show();" update=":rcbDialogForm:pgRcb">
                                        <h:panelGroup rendered="#{loginMB.notificacionesRecibidas eq 0}"><i class="fa fa-envelope Fs18 gray"></i></h:panelGroup>
                                        <h:panelGroup rendered="#{loginMB.notificacionesRecibidas gt 0}"><i class="fa fa-envelope Fs18 blue animated infinite rubberBand"></i></h:panelGroup>
                                        <span class="Fright Fs16 TexAlRight">Recibidas<span class="Fs10 DispBlock">#{loginMB.notificacionesRecibidas} por atender</span></span>
                                    </p:commandLink>
                                </li>
                                <li>
                                    <p:commandLink styleClass="Animated05" actionListener="#{loginMB.loadServedPanel}" oncomplete="PF('srvDialog').show();" update=":srvDialogForm:pgSrv">
                                        <h:panelGroup rendered="#{loginMB.notificacionesAtendidas eq 0}"><i class="fa fa-envelope Fs18 gray"></i></h:panelGroup>
                                        <h:panelGroup rendered="#{loginMB.notificacionesAtendidas gt 0}"><i class="fa fa-envelope Fs18 blue"></i></h:panelGroup>
                                        <span class="Fright Fs16 TexAlRight">Atendidas<span class="Fs10 DispBlock">#{loginMB.notificacionesAtendidas} atendidas</span></span>
                                    </p:commandLink>
                                </li>
                            </ul>
                        </li>                        
                    </h:panelGroup>
                    <h:panelGroup rendered="#{loginMB.user eq null}">
                        <li class="Animated05"><p:link href="#" onclick="PF('iniDialog').show();" styleClass="Unselectable"><i class="fa fa-sign-in"/> Iniciar Sesión</p:link></li>
                    </h:panelGroup>
                </ul>
            </h:form>

            <p:dialog id="asgDlg" header="Bandeja de Asignados" widgetVar="asgDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" >
                <h:form id="asgDialogForm">
                    <p:growl id="growl" globalOnly="true" showDetail="true" sticky="true"  />
                    <h:panelGrid id="pgAsg" columns="1" >
                        <p:dataTable id="tbl" value="#{loginMB.listaNotificacionesAsignadas}" var="row" paginator="true" rows="10" rowIndexVar="rowIndex"
                                     paginatorPosition="top" selectionMode="single" selection="#{loginMB.selectedNotification}" rowKey="#{row.idconocimiento}"
                                     emptyMessage="Ningún registro encontrado." style="width: 1200px;">
                            <p:ajax event="rowSelect" listener="#{loginMB.goToKnowledge}"  update=":seePregDialogForm:pgSeePreg, :seeBaseDialogForm:pgSeeBase "/>
                            <p:column style="width: 180px;" sortBy="#{row.categoria}" filterBy="#{row.categoria}" filterMatchMode="contains" filterStyle="width: 150px;text-transform: uppercase;" priority="1">
                                <f:facet name="header"><h:outputText value="CATEGORIA"/></f:facet>
                                <h:outputText value="#{row.categoria}" />
                            </p:column>
                            <p:column style="width: 180px;" sortBy="#{row.tipoConocimiento}" filterBy="#{row.tipoConocimiento}" filterMatchMode="contains" filterStyle="width: 150px;text-transform: uppercase;" priority="1">
                                <f:facet name="header"><h:outputText value="TIPO CONOCIMIENTO"/></f:facet>
                                <h:outputText value="#{row.tipoConocimiento}" styleClass="Fleft"/>
                            </p:column>
                            <p:column sortBy="#{row.codigo} #{row.nombre}" filterBy="#{row.codigo} #{row.nombre}" filterMatchMode="contains" filterStyle="width: 200px;text-transform: uppercase;" priority="2">
                                <f:facet name="header"><h:outputText value="NOMBRE"/></f:facet>
                                <h:outputText value="#{row.codigo} #{row.nombre}" styleClass="Fleft" rendered="#{not empty row.codigo}"/>
                                <h:outputText value="#{row.nombre}" styleClass="Fleft" rendered="#{empty row.codigo}"/>
                            </p:column>
                            <p:column style="width: 100px; text-align: center;" sortBy="#{row.estado}" filterBy="#{row.estado}" filterOptions="#{listaSessionMB.filterEstado}" filterMatchMode="exact" filterStyleClass="ui-selectonemenu" priority="3">
                                <f:facet name="header"><h:outputText value="ESTADO"/></f:facet>
                                <h:outputText value="#{row.estado}" />
                            </p:column>
                            <p:column style="text-align: center; width: 170px;" sortBy="#{row.fechaPublicacion}" filterBy="#{row.fechaPublicacion}" filterMatchMode="contains">
                                <f:facet name="header"><h:outputText value="FECHA PUBLICACION"/></f:facet>
                                <h:outputText value="#{row.fechaPublicacion}" >
                                    <f:convertDateTime dateStyle="medium" type="both" locale="es" />
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="rcbDlg" header="Bandeja de Recibidos" widgetVar="rcbDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" >
                <h:form id="rcbDialogForm">
                    <p:growl id="growl" globalOnly="true" showDetail="true" sticky="true"  />
                    <h:panelGrid id="pgRcb" columns="1" >
                        <p:dataTable id="tbl" value="#{loginMB.listaNotificacionesRecibidas}" var="row" paginator="true" rows="10" rowIndexVar="rowIndex"
                                     paginatorPosition="top" selectionMode="single" selection="#{loginMB.selectedNotification}" rowKey="#{row.id}"
                                     emptyMessage="Ningún registro encontrado." style="width: 1200px;">
                            <p:ajax event="rowSelect" listener="#{loginMB.goToKnowledge}"  update=":seePregDialogForm:pgSeePreg, :seeBaseDialogForm:pgSeeBase "/>
                            <p:column style="width: 180px;" sortBy="#{row.categoria}" filterBy="#{row.categoria}" filterMatchMode="contains" filterStyle="width: 150px;text-transform: uppercase;" priority="1">
                                <f:facet name="header"><h:outputText value="CATEGORIA"/></f:facet>
                                <h:outputText value="#{row.categoria}" />
                            </p:column>
                            <p:column style="width: 180px;" sortBy="#{row.tipoConocimiento}" filterBy="#{row.tipoConocimiento}" filterMatchMode="contains" filterStyle="width: 150px;text-transform: uppercase;" priority="1">
                                <f:facet name="header"><h:outputText value="TIPO CONOCIMIENTO"/></f:facet>
                                <h:outputText value="#{row.tipoConocimiento}" styleClass="Fleft"/>
                            </p:column>
                            <p:column sortBy="#{row.codigo} #{row.nombre}" filterBy="#{row.codigo} #{row.nombre}" filterMatchMode="contains" filterStyle="width: 200px;text-transform: uppercase;" priority="2">
                                <f:facet name="header"><h:outputText value="NOMBRE"/></f:facet>
                                <h:outputText value="#{row.codigo} #{row.nombre}" styleClass="Fleft" rendered="#{not empty row.codigo}"/>
                                <h:outputText value="#{row.nombre}" styleClass="Fleft" rendered="#{empty row.codigo}"/>
                            </p:column>
                            <p:column style="width: 100px; text-align: center;" sortBy="#{row.estado}" filterBy="#{row.estado}" filterOptions="#{listaSessionMB.filterEstado}" filterMatchMode="exact" filterStyleClass="ui-selectonemenu" priority="3">
                                <f:facet name="header"><h:outputText value="ESTADO"/></f:facet>
                                <h:outputText value="#{row.estado}" />
                            </p:column>
                            <p:column style="text-align: center; width: 170px;" sortBy="#{row.fechaPublicacion}" filterBy="#{row.fechaPublicacion}" filterMatchMode="contains">
                                <f:facet name="header"><h:outputText value="FECHA PUBLICACION"/></f:facet>
                                <h:outputText value="#{row.fechaPublicacion}" >
                                    <f:convertDateTime dateStyle="medium" type="both" locale="es" />
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="srvDlg" header="Bandeja de Atendidos" widgetVar="srvDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" >
                <h:form id="srvDialogForm">
                    <p:growl id="growl" globalOnly="true" showDetail="true" sticky="true"  />
                    <h:panelGrid id="pgSrv" columns="1" >
                        <p:dataTable id="tbl" value="#{loginMB.listaNotificacionesAtendidas}" var="row" paginator="true" rows="10" rowIndexVar="rowIndex"
                                     paginatorPosition="top" emptyMessage="Ningún registro encontrado." style="width: 1200px;">
                            <p:column style="width: 180px;" sortBy="#{row.categoria}" filterBy="#{row.categoria}" filterMatchMode="contains" filterStyle="width: 150px;text-transform: uppercase;" priority="1">
                                <f:facet name="header"><h:outputText value="CATEGORIA"/></f:facet>
                                <h:outputText value="#{row.categoria}" />
                            </p:column>
                            <p:column style="width: 180px;" sortBy="#{row.tipoConocimiento}" filterBy="#{row.tipoConocimiento}" filterMatchMode="contains" filterStyle="width: 150px;text-transform: uppercase;" priority="1">
                                <f:facet name="header"><h:outputText value="TIPO CONOCIMIENTO"/></f:facet>
                                <h:outputText value="#{row.tipoConocimiento}" styleClass="Fleft"/>
                            </p:column>
                            <p:column sortBy="#{row.codigo} #{row.nombre}" filterBy="#{row.codigo} #{row.nombre}" filterMatchMode="contains" filterStyle="width: 200px;text-transform: uppercase;" priority="2">
                                <f:facet name="header"><h:outputText value="NOMBRE"/></f:facet>
                                <h:outputText value="#{row.codigo} #{row.nombre}" styleClass="Fleft" rendered="#{not empty row.codigo}"/>
                                <h:outputText value="#{row.nombre}" styleClass="Fleft" rendered="#{empty row.codigo}"/>
                            </p:column>
                            <p:column style="width: 100px; text-align: center;" sortBy="#{row.estado}" filterBy="#{row.estado}" filterOptions="#{listaSessionMB.filterEstado}" filterMatchMode="exact" filterStyleClass="ui-selectonemenu" priority="3">
                                <f:facet name="header"><h:outputText value="ESTADO"/></f:facet>
                                <h:outputText value="#{row.estado}" />
                            </p:column>
                            <p:column style="text-align: center; width: 170px;" sortBy="#{row.fechaPublicacion}" filterBy="#{row.fechaPublicacion}" filterMatchMode="contains">
                                <f:facet name="header"><h:outputText value="FECHA PUBLICACION"/></f:facet>
                                <h:outputText value="#{row.fechaPublicacion}" >
                                    <f:convertDateTime dateStyle="medium" type="both" locale="es" />
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="iniDlg" header="Iniciar Sesion" widgetVar="iniDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" >
                <h:form id="iniDialogForm">
                    <p:growl id="growl" globalOnly="true" showDetail="true" sticky="true"  />
                    <h:panelGrid id="pgIni" columns="1" styleClass="TexAlCenter">
                        <p:graphicImage library="images" name="46.jpg" style="border: 0px;"/>
                        <p:spacer/>
                        <h:outputText value="Ingresa tu Usuario y Contraseña" class="FontBold"/>
                        <p:inputText value="#{loginMB.login}" size="25" maxlength="25" styleClass="Fs14"/>
                        <p:password value="#{loginMB.pass}" size="25" styleClass="Fs14"/>
                        <p:spacer/>
                        <p:commandButton value="Iniciar Sesion" action="#{loginMB.ingresar}" update=":iniDialogForm:growl" oncomplete="manejarLogin(xhr, status, args)"/>
                        <p:spacer/>
                        <p:row>
                            <p:column>
                                <h:outputText value="Aún no tienes cuenta? "/> <p:commandLink value="Registrate" update=":regDialogForm:pgReg" oncomplete="PF('regDialog').show();" styleClass="ui-link Fs14 FontBold"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:commandLink value="Olvide mi contraseña" styleClass="ui-link Fs14 FontBold"/>
                            </p:column>
                        </p:row>
                        <p:separator />
                        <p:row>
                            <p:column>
                                <h:outputText value="Ver las "/><p:commandLink value="Condiciones de Uso" styleClass="ui-link Fs14 FontBold"/><h:outputText value=" y las"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:commandLink value="Politicas de Privacidad" styleClass="ui-link Fs14 FontBold"/> 
                            </p:column>
                        </p:row>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="regDlg" header="Registro de Usuario" widgetVar="regDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" style="font-size: 10px;"  >
                <h:form id="regDialogForm">
                    <p:growl id="growl" globalOnly="true" showDetail="true" sticky="true"  />
                    <p:scrollPanel mode="native" style="width:500px;height:600px">
                        <p:outputLabel style="color: darkgray" value="Accede a todos los servicios del portal con solo un nombre y contraseña"/>
                        <br></br>
                        <br></br>
                        <p:messages id="messages" showDetail="true" autoUpdate="true" />
                        <h:panelGrid columns="2" id="pgReg">     

                            <p:outputLabel style="color: cornflowerblue; font-weight: bold " value="DATOS DEL USUARIO"/>
                            <p:spacer/>

                            <h:outputLabel value="Nombres: "/>
                            <p:inputText size="50" value="#{userMB.nombres}"  maxlength="25" />

                            <h:outputLabel value="Apellidos: "/>
                            <p:inputText size="50" value="#{userMB.apellidos}"  maxlength="25" />

                            <h:outputLabel value="Nombre de Usuario: "/>
                            <p:inputText size="50" value="#{userMB.login}"  maxlength="25" />

                            <h:outputLabel for="pwd1" value="Contraseña: " />
                            <p:password id="pwd1" value="#{userMB.pass}" match="pwd2" label="Password 1"  required="true" />

                            <h:outputLabel for="pwd2" value="Confirmar contraseña: " />
                            <p:password id="pwd2" value="#{userMB.pass}" label="Password 2" required="true"  />

                            <h:outputLabel value="Fecha de nacimiento: "/>
                            <h:panelGrid columns="3">
                                <p:selectOneMenu id="console1" value="#{userMB.dia}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:60px">
                                    <f:selectItems value="#{userMB.dias}" />
                                </p:selectOneMenu>
                                <p:selectOneMenu id="console2" value="#{userMB.mes}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                    <f:selectItem itemLabel="Enero" itemValue="1" />
                                    <f:selectItem itemLabel="Febrero" itemValue="2" />
                                    <f:selectItem itemLabel="Marzo" itemValue="3" />
                                    <f:selectItem itemLabel="Abril" itemValue="4" />
                                    <f:selectItem itemLabel="Mayo" itemValue="5" />
                                    <f:selectItem itemLabel="Junio" itemValue="6" />
                                    <f:selectItem itemLabel="Julio" itemValue="7" />
                                    <f:selectItem itemLabel="Agosto" itemValue="8" />
                                    <f:selectItem itemLabel="Setiembre" itemValue="9" />
                                    <f:selectItem itemLabel="Octubre" itemValue="10" />
                                    <f:selectItem itemLabel="Noviembre" itemValue="11" />
                                    <f:selectItem itemLabel="Diciembre" itemValue="12" />
                                </p:selectOneMenu>
                                <p:selectOneMenu id="console3" value="#{userMB.año}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:80px">
                                    <f:selectItems value="#{userMB.años}" />
                                </p:selectOneMenu>
                            </h:panelGrid>

                            <h:outputLabel value="Sexo: "/>
                            <p:selectOneMenu id="console4" value="#{userMB.sexo}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                <f:selectItem itemLabel="Masculino" itemValue="M" />
                                <f:selectItem itemLabel="Femenino" itemValue="F" />
                            </p:selectOneMenu>

                            <h:outputLabel value="DNI: "/>
                            <p:inputText size="50" value="#{userMB.dni}"  maxlength="8" />

                            <p:spacer/>
                            <p:spacer/>

                            <p:outputLabel style="color: cornflowerblue; font-weight: bold " value="LUGAR DE"/>
                            <p:spacer/>
                            <p:outputLabel style="color: cornflowerblue; font-weight: bold " value="RESIDENCIA(PERU)"/>
                            <p:spacer/>

                            <h:outputLabel value="Departamento: "/>
                            <p:selectOneMenu id="console5" value="#{userMB.departamento}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                <f:selectItem itemLabel="Lima" itemValue="1" />
                                <f:selectItem itemLabel="La Libertad" itemValue="2" />
                                <f:selectItem itemLabel="Ancash" itemValue="3" />
                                <f:selectItem itemLabel="Arequipa" itemValue="4" />
                                <f:selectItem itemLabel="Ica" itemValue="5" />
                                <f:selectItem itemLabel="Tumbes" itemValue="6" />
                            </p:selectOneMenu>

                            <h:outputLabel value="Provincia: "/>
                            <p:selectOneMenu id="console6" value="#{userMB.provincia}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                <f:selectItem itemLabel="Lima" itemValue="1" />
                                <f:selectItem itemLabel="Provincia 1" itemValue="2" />
                                <f:selectItem itemLabel="Provincia 2" itemValue="3" />
                                <f:selectItem itemLabel="Provincia 3" itemValue="4" />
                                <f:selectItem itemLabel="Provincia 4" itemValue="5" />
                                <f:selectItem itemLabel="Provincia 5" itemValue="6" />
                            </p:selectOneMenu>

                            <h:outputLabel value="Distrito: "/>
                            <p:selectOneMenu id="console7" value="#{userMB.distrito}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                <f:selectItem itemLabel="Lima" itemValue="1" />
                                <f:selectItem itemLabel="Pueblo Libre" itemValue="2" />
                                <f:selectItem itemLabel="Lince" itemValue="3" />
                                <f:selectItem itemLabel="Magdalena" itemValue="4" />
                                <f:selectItem itemLabel="Jesus Maria" itemValue="5" />
                                <f:selectItem itemLabel="San Isidro" itemValue="6" />
                            </p:selectOneMenu>

                            <p:spacer/>
                            <p:spacer/>

                            <p:outputLabel style="color: cornflowerblue; font-weight: bold " value="INFORMACION"/>
                            <p:spacer/>
                            <p:outputLabel style="color: cornflowerblue; font-weight: bold " value="LABORAL"/>
                            <p:spacer/>

                            <h:outputLabel value="Profesion: "/>
                            <p:selectOneMenu id="console8" value="#{userMB.profesion}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                <f:selectItem itemLabel="Profesion 1" itemValue="1" />
                                <f:selectItem itemLabel="Profesion 2" itemValue="2" />
                                <f:selectItem itemLabel="Profesion 3" itemValue="3" />
                                <f:selectItem itemLabel="Profesion 4" itemValue="4" />
                                <f:selectItem itemLabel="Profesion 5" itemValue="5" />
                                <f:selectItem itemLabel="Profesion 6" itemValue="6" />
                            </p:selectOneMenu>

                            <p:spacer/>
                            <p:spacer/>

                            <p:spacer/>
                            <p:spacer/>

                            <p:spacer/>
                            <p:spacer/>

                            <h:outputLabel value="Trabaja en el Ministerio"/>
                            <p:spacer/>
                            <h:outputLabel value="de Economiay Finanzas?"/>
                            <p:selectOneRadio id="console9" value="#{userMB.trabajaMef}">
                                <f:selectItem itemLabel="SI" itemValue="1" />
                                <f:selectItem itemLabel="NO" itemValue="0" />
                            </p:selectOneRadio>

                            <p:spacer/>
                            <p:spacer/>

                            <p:spacer/>
                            <p:spacer/>

                            <p:spacer/>
                            <h:panelGrid columns="4">
                                <h:outputLabel value="Entidad "/>
                                <p:selectOneMenu id="console10" value="#{userMB.entidad}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                    <f:selectItem itemLabel="Entidad 1" itemValue="1" />
                                    <f:selectItem itemLabel="Entidad 2" itemValue="2" />
                                    <f:selectItem itemLabel="Entidad 3" itemValue="3" />
                                    <f:selectItem itemLabel="Entidad 4" itemValue="4" />
                                    <f:selectItem itemLabel="Entidad 5" itemValue="5" />
                                    <f:selectItem itemLabel="Entidad 6" itemValue="6" />
                                </p:selectOneMenu>

                                <h:outputLabel value="Cargo "/>
                                <p:selectOneMenu id="console11" value="#{userMB.cargo}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                    <f:selectItem itemLabel="Cargo 1" itemValue="1" />
                                    <f:selectItem itemLabel="Cargo 2" itemValue="2" />
                                    <f:selectItem itemLabel="Cargo 3" itemValue="3" />
                                    <f:selectItem itemLabel="Cargo 4" itemValue="4" />
                                    <f:selectItem itemLabel="Cargo 5" itemValue="5" />
                                    <f:selectItem itemLabel="Cargo 6" itemValue="6" />
                                </p:selectOneMenu>

                                <h:outputLabel value="Pliego "/>
                                <p:selectOneMenu id="console12" value="#{userMB.pliego}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                    <f:selectItem itemLabel="Pliego 1" itemValue="1" />
                                    <f:selectItem itemLabel="Pliego 2" itemValue="2" />
                                    <f:selectItem itemLabel="Pliego 3" itemValue="3" />
                                    <f:selectItem itemLabel="Pliego 4" itemValue="4" />
                                    <f:selectItem itemLabel="Pliego 5" itemValue="5" />
                                    <f:selectItem itemLabel="Pliego 6" itemValue="6" />
                                </p:selectOneMenu>

                                <h:outputLabel value="Area "/>
                                <p:selectOneMenu id="console13" value="#{userMB.area}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                    <f:selectItem itemLabel="Area 1" itemValue="1" />
                                    <f:selectItem itemLabel="Area 2" itemValue="2" />
                                    <f:selectItem itemLabel="Area 3" itemValue="3" />
                                    <f:selectItem itemLabel="Area 4" itemValue="4" />
                                    <f:selectItem itemLabel="Area 5" itemValue="5" />
                                    <f:selectItem itemLabel="Area 6" itemValue="6" />
                                </p:selectOneMenu>

                                <h:outputLabel value="Sector "/>
                                <p:selectOneMenu id="console14" value="#{userMB.sector}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                    <f:selectItem itemLabel="Sector 1" itemValue="1" />
                                    <f:selectItem itemLabel="Sector 2" itemValue="2" />
                                    <f:selectItem itemLabel="Sector 3" itemValue="3" />
                                    <f:selectItem itemLabel="Sector 4" itemValue="4" />
                                    <f:selectItem itemLabel="Sector 5" itemValue="5" />
                                    <f:selectItem itemLabel="Sector 6" itemValue="6" />
                                </p:selectOneMenu>

                                <h:outputLabel value="Gobierno "/>
                                <p:selectOneMenu id="console15" value="#{userMB.gobierno}" panelStyle="font-size: 10px;width: 150px;" style="font-size: 10px; width:100px">
                                    <f:selectItem itemLabel="Gobierno 1" itemValue="1" />
                                    <f:selectItem itemLabel="Gobierno 2" itemValue="2" />
                                    <f:selectItem itemLabel="Gobierno 3" itemValue="3" />
                                    <f:selectItem itemLabel="Gobierno 4" itemValue="4" />
                                    <f:selectItem itemLabel="Gobierno 5" itemValue="5" />
                                    <f:selectItem itemLabel="Gobierno 6" itemValue="6" />
                                </p:selectOneMenu>
                            </h:panelGrid>
                            <p:spacer/>
                        </h:panelGrid>
                        <p:captcha label="Captcha" />
                        <p:commandButton update="pgReg" actionListener="#{userMB.save}" value="Registrar" />
                    </p:scrollPanel>
                </h:form>
            </p:dialog>

            <p:dialog id="seeBaseDlg" header="#{msgs.bl_lbl_pnlView}" widgetVar="seeBaseDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" style="font-size: 10px;">
                <h:form id="seeBaseDialogForm">
                    <h:panelGrid id="pgSeeBase" columns="3">
                        <h:outputText value="#{msgs.icon_asterisk}"/>
                        <h:outputText value="#{msgs.bl_lbl_categoria}"/>
                        <h:outputText value="#{loginMB.selectedBaseLegal.ncategoriaid}" >
                            <f:converter converterId="converterCategoria"/>
                        </h:outputText>

                        <h:outputText value="#{msgs.icon_asterisk}"/>
                        <h:outputText value="#{msgs.bl_lbl_archivo}"/>
                        <h:panelGrid columns="1" cellspacing="0" cellpadding="0">
                            <p:lightBox>
                                <h:outputLink value="#">
                                    <h:panelGrid columns="2">
                                        <p:graphicImage library="images" name="pdf.png"/>
                                        <h:outputText id="fileName" value="#{loginMB.selectedBaseLegal.archivo.vnombre}"/>
                                    </h:panelGrid>
                                </h:outputLink>
                                <f:facet name="inline">
                                    <p:media player="pdf" cache="false" value="#{loginMB.pdf}" width="#{msgs.pdfwidth}" height="#{msgs.pdfheight}">
                                        <f:param name="fileName" value="#{loginMB.selectedBaseLegal.archivo.vruta}"/>
                                    </p:media>
                                </f:facet>
                            </p:lightBox>
                        </h:panelGrid>

                        <h:outputText value="#{msgs.icon_asterisk}"/>
                        <h:outputText value="#{msgs.bl_lbl_nombre}"/>
                        <h:outputText value="#{loginMB.selectedBaseLegal.vnombre}" />

                        <h:outputText value="#{msgs.icon_asterisk}"/>
                        <h:outputText value="#{msgs.bl_lbl_numero}"/>
                        <h:outputText value="#{loginMB.selectedBaseLegal.vnumero}" />

                        <h:outputText value="#{msgs.icon_asterisk}"/>
                        <h:outputText value="#{msgs.bl_lbl_rango}"/>
                        <h:outputText value="#{loginMB.selectedBaseLegal.nrangoid}" >
                            <f:converter converterId="converterRango"/>
                        </h:outputText>

                        <h:outputText value="#{msgs.icon_asterisk}"/>
                        <h:outputText value="#{msgs.bl_lbl_ambito}"/>                                
                        <h:panelGrid columns="4">
                            <p:selectBooleanCheckbox value="#{loginMB.selectedBaseLegal.ngobnacional eq 1}" itemLabel="Gobierno Nacional"  />
                            <p:selectBooleanCheckbox value="#{loginMB.selectedBaseLegal.ngobregional eq 1}" itemLabel="Gobierno Regional" />
                            <p:selectBooleanCheckbox value="#{loginMB.selectedBaseLegal.ngoblocal eq 1}" itemLabel="Gobierno Local" />
                            <p:selectBooleanCheckbox value="#{loginMB.selectedBaseLegal.nmancomunidades eq 1}" itemLabel="Mancomunidades" />
                        </h:panelGrid>

                        <h:outputText value="#{msgs.icon_asterisk}"/>
                        <h:outputText value="#{msgs.bl_lbl_sumilla}"/>
                        <h:outputText value="#{loginMB.selectedBaseLegal.vsumilla}" />

                        <h:outputText value="#{msgs.icon_asterisk}"/>
                        <h:outputText value="#{msgs.bl_lbl_fecha}"/>
                        <h:outputText value="#{loginMB.selectedBaseLegal.dfechapublicacion}" >
                            <f:convertDateTime dateStyle="medium" type="date" locale="es" />
                        </h:outputText>

                        <h:outputText value="#{msgs.icon_asterisk}"/>
                        <h:outputText value="#{msgs.bl_lbl_tema}"/>
                        <h:outputText value="#{loginMB.selectedBaseLegal.vtema}" />

                        <h:outputText value="#{msgs.icon_asterisk}"/>
                        <h:outputText value="#{msgs.bl_lbl_vinculo}"/>
                        <p:spacer/>
                    </h:panelGrid>
                    <p:fieldset>
                        <h:panelGrid id="pgViewVinc" columns="1" cellpadding="0" cellspacing="0">
                            <p:dataTable value="#{loginMB.listaTarget}" var="t" rowIndexVar="rowIndex"
                                         emptyMessage="Ninguna base legal vinculada." style="width: 900px;">
                                <p:column style="width: 80px; text-align: center;" headerText="#{msgs.bl_lbl_columna07}">
                                    <h:outputText value="#{t.vnumero}"/>
                                </p:column>
                                <p:column headerText="#{msgs.bl_lbl_columna08}">
                                    <h:outputText value="#{t.vnombre}"/>
                                </p:column>
                                <p:column style="width: 80px; text-align: center;" headerText="#{msgs.bl_lbl_columna09}">
                                    <h:outputText value="#{t.vcategoria}"/>
                                </p:column>
                                <p:column style="width: 80px; text-align: center;" headerText="#{msgs.bl_lbl_columna10}">
                                    <h:outputText value="#{t.nestadoid}">
                                        <f:converter converterId="converterEstadoBaseLegal"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </h:panelGrid>
                    </p:fieldset>
                </h:form>
            </p:dialog>

            <p:dialog id="seePregDlg" header="Ver Pregunta" widgetVar="seePregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" style="font-size: 10px;">
                <h:form id="seePregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgSeePreg"  columns="2" width="400px">

                        <h:outputLabel  value="Mensaje del usuario:" rendered="#{loginMB.getfMsjUsu1()}"/>
                        <p:inputTextarea value="#{loginMB.selectedPregunta.vmsjusuario1}" rows="4" cols="66" style="font-weight: normal;"
                                         readonly="#{loginMB.getfMsjUsu1()}"  maxlength="400" counterTemplate="{0} caracteres restantes." rendered="#{loginMB.getfMsjUsu1()}"/>

                        <h:outputLabel value="Mensaje del Moderador" rendered="#{loginMB.getfSInfMod()}"/>
                        <p:inputTextarea  value="#{loginMB.selectedPregunta.vmsjmoderador}" rows="4" cols="66" style="font-weight: normal;"
                                          readonly="#{loginMB.getfSInfMod()}"  maxlength="400" counterTemplate="{0} caracteres restantes." rendered="#{loginMB.getfSInfMod()}"/>

                        <h:outputLabel  value="Mensaje del usuario:" rendered="#{loginMB.getfMsjUsu2()}"/>
                        <p:inputTextarea value="#{loginMB.selectedPregunta.vmsjusuario2}" rows="4" cols="66" style="font-weight: normal;"
                                         readonly="#{loginMB.getfMsjUsu2()}"  maxlength="400" counterTemplate="{0} caracteres restantes." rendered="#{loginMB.getfMsjUsu2()}"/>

                        <h:outputLabel value="Mensaje del Especialista:" rendered="#{loginMB.getfSInfEspe()}"/>
                        <p:inputTextarea  value="#{loginMB.selectedPregunta.vmsjespecialista}" rows="4" cols="66" style="font-weight: normal;"
                                          readonly="#{loginMB.getfSInfEspe()}"  maxlength="400" counterTemplate="{0} caracteres restantes." rendered="#{loginMB.getfSInfEspe()}"/>

                        <h:outputLabel value="Categoría:"/>
                        <h:outputText value="#{loginMB.selectedPregunta.ncategoriaid}" >
                            <f:converter converterId="converterCategoria"/>
                        </h:outputText>

                        <h:outputLabel value="Asunto:"/>
                        <h:outputText value="#{loginMB.selectedPregunta.vasunto}"/>

                        <h:outputLabel value="Detalle:"/>
                        <h:outputText value="#{loginMB.selectedPregunta.vdetalle}"/>

                        <h:outputLabel value="Entidad:"/>
                        <h:outputText value="MEF"/>    


                        <h:outputLabel value="Dato adicional:"/>
                        <h:outputText id="tema" value="#{loginMB.selectedPregunta.vdatoadicional}" />

                        <p:spacer rendered="#{loginMB.getfButtonMod()}"/>
                        <h:panelGrid columns="1" style="float: right" rendered="#{loginMB.getfButtonMod()}">
                            <p:commandButton  value="Verificar" actionListener="#{loginMB.toMod}" update=":modPregDialogForm:pgModPreg" oncomplete="PF('modPregDialog').show();" />
                        </h:panelGrid>

                        <p:spacer rendered="#{loginMB.getfButtonModPub()}"/>
                        <h:panelGrid columns="1" style="float: right" rendered="#{loginMB.getfButtonModPub()}">
                            <p:commandButton  value="Verificar" actionListener="#{loginMB.toModPub}" update=":modPubPregDialogForm:pgModPubPreg" oncomplete="PF('modPubPregDialog').show();" />
                        </h:panelGrid>

                        <p:spacer rendered="#{loginMB.getfButtonEspe()}"/>
                        <h:panelGrid columns="1" style="float: right" rendered="#{loginMB.getfButtonEspe()}">
                            <p:commandButton  value="Responder" actionListener="#{loginMB.toResp}" update=":respPregDialogForm:pgRespPreg" oncomplete="PF('respPregDialog').show();" />
                        </h:panelGrid>

                        <p:spacer rendered="#{loginMB.getfButton()}"/>
                        <h:panelGrid columns="1" style="float: right" rendered="#{loginMB.getfButton()}">
                            <p:commandButton  value="Responder Especialista" actionListener="#{loginMB.toRespUsu}" update=":respUsuPregDialogForm:pgRespUsuPreg" oncomplete="PF('respUsuPregDialog').show();" />
                        </h:panelGrid>

                        <p:spacer rendered="#{loginMB.getfButtonUM()}"/>
                        <h:panelGrid columns="1" style="float: right" rendered="#{loginMB.getfButtonUM()}">
                            <p:commandButton  value="Responder al Moderador" actionListener="#{loginMB.toRespUsuMod}" update=":respModPregDialogForm:pgRespModPreg" oncomplete="PF('respModPregDialog').show();" />
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="modPregDlg" header="Moderar Pregunta" widgetVar="modPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="false" style="font-size: 10px;">
                <h:form id="modPregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgModPreg"  columns="2" width="500px">                           

                        <h:outputLabel  value="Mensaje del usuario:" rendered="#{loginMB.getfMsjUsu1()}"/>
                        <p:inputTextarea value="#{loginMB.selectedPregunta.vmsjusuario1}" rows="4" cols="66" style="font-weight: normal;"
                                         readonly="#{loginMB.getfMsjUsu1()}"  maxlength="400" counterTemplate="{0} caracteres restantes." rendered="#{loginMB.getfMsjUsu1()}"/>

                        <h:outputLabel value="Mensaje del Moderador" rendered="#{loginMB.getfSInfMod()}"/>
                        <p:inputTextarea  value="#{loginMB.selectedPregunta.vmsjmoderador}" rows="4" cols="66" style="font-weight: normal;"
                                          readonly="#{loginMB.getfSInfMod()}"  maxlength="400" counterTemplate="{0} caracteres restantes." rendered="#{loginMB.getfSInfMod()}"/>

                        <h:outputLabel value="Categoría:"/>
                        <h:panelGrid  columns="1">
                            <h:outputText id="catmod" value="#{loginMB.selectedPregunta.ncategoriaid}" >
                                <f:converter converterId="converterCategoria"/>
                            </h:outputText>
                        </h:panelGrid>

                        <h:outputLabel value="Asunto:"/>
                        <h:outputLabel value="#{loginMB.selectedPregunta.vasunto}"  />

                        <h:outputLabel value="Detalle:"/>
                        <h:outputText value="#{loginMB.selectedPregunta.vdetalle}"/>

                        <h:outputLabel value="Entidad:"/>
                        <h:outputText value="MEF"/>

                        <h:outputLabel value="Dato adicional:"/>
                        <h:outputText id="tema" value="#{loginMB.selectedPregunta.vdatoadicional}" />
                        <p:watermark for="tema" value="(Opcional)"/>

                    </h:panelGrid>
                    <br></br>
                    <h:panelGrid columns="3" style="padding-left: 55px">
                        <p:commandButton value="Editar" actionListener="#{loginMB.toEdit}" update=":editPregDialogForm:pgEditPreg" oncomplete="PF('editPregDialog').show();" />
                        <p:commandButton value="Derivar" actionListener="#{loginMB.DevEsp}" update=":asgDialogForm:tbl, :rcbDialogForm:tbl, :srvDialogForm:tbl"/>
                        <p:commandButton value="Solicitar Informacion Adicional" actionListener="#{loginMB.toSi}" update=":siModPregDialogForm:pgSiModPreg" oncomplete="PF('siModPregDialog').show();"  />
                    </h:panelGrid>
                    <h:panelGrid columns="2" style="padding-left: 110px">
                        <p:commandButton value="Rechazar" actionListener="#{loginMB.Rechazar}" update=":asgDialogForm:tbl, :rcbDialogForm:tbl, :srvDialogForm:tbl"/>
                        <p:commandButton value="Cancelar" actionListener="#{loginMB.toCancel}" />
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="editPregDlg" header="Editar Pregunta" widgetVar="editPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="false" style="font-size: 10px;">
                <h:form id="editPregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgEditPreg"  columns="2" width="500px">

                        <h:outputLabel value="Categoría:"/>
                        <h:panelGrid  columns="2">
                            <h:outputText id="catedit" value="#{loginMB.selectedPregunta.ncategoriaid}" >
                                <f:converter converterId="converterCategoria"/>
                            </h:outputText>
                            <p:commandButton value="Seleccionar Categoría" actionListener="#{loginMB.loadTree}" oncomplete="PF('catPregDialog').show();" update=":catPregDialogForm:pgCatPreg" />    
                        </h:panelGrid>

                        <h:outputLabel value="Asunto:"/>
                        <p:inputText size="99" value="#{loginMB.selectedPregunta.vasunto}"  maxlength="80"/>

                        <h:outputLabel value="Detalle:"/>
                        <h:panelGrid columns="1" cellspacing="0" cellpadding="0">
                            <p:inputTextarea value="#{loginMB.selectedPregunta.vdetalle}" rows="4" cols="66" style="font-weight: normal;"
                                             counter="displayd" maxlength="400" counterTemplate="{0} caracteres restantes." />
                            <h:outputText id="displayd"/>
                        </h:panelGrid>

                        <h:outputLabel value="Entidad" style="text-decoration: underline"/>
                        <p:spacer/>

                        <h:panelGrid columns="3">
                            <h:outputLabel value="NM:"/>
                            <p:inputText size="5" value="#{loginMB.entidadId}" maxlength="5"/>
                            <p:commandButton actionListener="#{loginMB.toEnt}" icon="ui-icon-search" update="ent"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <h:outputLabel value="Nombre:"/>
                            <p:inputText id="ent" size="50" value="#{loginMB.entidad}"/>  
                        </h:panelGrid>

                        <h:outputLabel value="Dato adicional:"/>
                        <p:inputText id="tema" size="99" value="#{loginMB.selectedPregunta.vdatoadicional}" maxlength="80"/>

                    </h:panelGrid>
                    <br></br>
                    <br></br>
                    <h:panelGrid columns="2" width="100%">
                        <p:commandButton value="Guardar" actionListener="#{loginMB.savePregEdit}" update=":modPregDialogForm:pgModPreg" oncomplete="PF('modPregDialog').show();"/>
                        <p:commandButton value="Cancelar" actionListener="#{loginMB.toCancelRespEdit}" update=":modPregDialogForm:pgModPreg" oncomplete="PF('modPregDialog').show();" />
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="siModPregDlg" header="Solicitar Informacion Adicional - Moderador" widgetVar="siModPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" style="font-size: 10px;">
                <h:form id="siModPregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgSiModPreg"  columns="2">
                        <h:outputLabel value="Mensaje:"/>
                        <h:panelGrid columns="1" cellspacing="0" cellpadding="0">
                            <p:inputTextarea value="#{loginMB.selectedPregunta.vmsjmoderador}" rows="4" cols="66" style="font-weight: normal;"
                                             readonly="#{loginMB.getfSInfMod()}" counter="display" maxlength="400" counterTemplate="{0} caracteres restantes."/>
                            <h:outputText id="display"/>
                        </h:panelGrid>
                        <p:spacer/>
                        <h:panelGrid style="float: right" columns="2" width="25%">
                            <p:commandButton value="Enviar" actionListener="#{loginMB.sendSiMod}" update=":modPregDialogForm:pgModPreg, :asgDialogForm:tbl, :rcbDialogForm:tbl, :srvDialogForm:tbl" />
                            <p:commandButton value="Cancelar" actionListener="#{loginMB.toCancelSiMod}" />
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="modPubPregDlg" header="Moderar Pregunta" widgetVar="modPubPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="false" style="font-size: 10px;">
                <h:form id="modPubPregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgModPubPreg"  columns="2" width="500px">
                        <h:outputLabel value="Categoría:"/>
                        <h:panelGrid  columns="1">
                            <h:outputText id="catmod" value="#{loginMB.selectedPregunta.ncategoriaid}" >
                                <f:converter converterId="converterCategoria"/>
                            </h:outputText>
                        </h:panelGrid>

                        <h:outputLabel value="Asunto:"/>
                        <h:outputLabel value="#{loginMB.selectedPregunta.vasunto}"  />

                        <h:outputLabel value="Detalle:"/>
                        <h:outputText value="#{loginMB.selectedPregunta.vdetalle}"/>

                        <h:outputLabel value="Respuesta:"/>
                        <h:outputText value="#{loginMB.selectedPregunta.vrespuesta}"/>

                        <h:outputLabel value="Entidad:"/>
                        <h:outputText value="MEF"/>

                        <h:outputLabel value="Dato adicional:"/>
                        <h:outputText id="tema" value="#{loginMB.selectedPregunta.vdatoadicional}" />
                        <p:watermark for="tema" value="(Opcional)"/>

                    </h:panelGrid>
                    <br></br>
                    <h:panelGrid columns="3" style="padding-left: 140px">
                        <p:commandButton value="Editar" actionListener="#{loginMB.toEdit}" update=":editPubPregDialogForm:pgEditPubPreg" oncomplete="PF('editPubPregDialog').show();" />
                        <p:commandButton value="Publicar" actionListener="#{loginMB.Publicar}" update=":asgDialogForm:tbl, :rcbDialogForm:tbl, :srvDialogForm:tbl"/>
                        <p:commandButton value="Cancelar" actionListener="#{loginMB.toCancel}" />
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="editPubPregDlg" header="Editar Pregunta" widgetVar="editPubPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="false" style="font-size: 10px;">
                <h:form id="editPubPregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgEditPubPreg"  columns="2" width="500px">

                        <h:outputLabel value="Categoría:"/>
                        <h:panelGrid  columns="1">
                            <h:outputText value="#{loginMB.selectedPregunta.ncategoriaid}" >
                                <f:converter converterId="converterCategoria"/>
                            </h:outputText>

                        </h:panelGrid>

                        <h:outputLabel value="Asunto:"/>
                        <p:inputText size="99" value="#{loginMB.selectedPregunta.vasunto}"  maxlength="80"/>

                        <h:outputLabel value="Detalle:"/>
                        <h:panelGrid columns="1" cellspacing="0" cellpadding="0">
                            <p:inputTextarea value="#{loginMB.selectedPregunta.vdetalle}" rows="4" cols="66" style="font-weight: normal;"
                                             counter="displayd" maxlength="400" counterTemplate="{0} caracteres restantes." />
                            <h:outputText id="displayd"/>
                        </h:panelGrid>

                        <h:outputLabel value="Respuesta"/>
                        <h:panelGrid columns="1" cellspacing="0" cellpadding="0">
                            <p:inputTextarea value="#{loginMB.selectedPregunta.vrespuesta}" rows="4" cols="66" style="font-weight: normal;"
                                             counter="displayr" maxlength="400" counterTemplate="{0} caracteres restantes." />
                            <h:outputText id="displayr"/>
                        </h:panelGrid>

                        <h:outputLabel value="Entidad" style="text-decoration: underline"/>
                        <p:spacer/>

                        <h:panelGrid columns="3">
                            <h:outputLabel value="NM:"/>
                            <p:inputText size="5" value="#{loginMB.entidadId}" maxlength="5"/>
                            <p:commandButton actionListener="#{loginMB.toEnt}" icon="ui-icon-search" update="ent"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <h:outputLabel value="Nombre:"/>
                            <p:inputText id="ent" size="50" value="#{loginMB.entidad}"/>  
                        </h:panelGrid>

                        <h:outputLabel value="Dato adicional:"/>
                        <p:inputText id="tema" size="99" value="#{loginMB.selectedPregunta.vdatoadicional}" maxlength="80"/>

                    </h:panelGrid>
                    <br></br>
                    <br></br>
                    <h:panelGrid columns="2" width="100%">
                        <p:commandButton value="Guardar" actionListener="#{loginMB.savePubEdit}" update=":modPubPregDialogForm:pgModPubPreg" oncomplete="PF('modPubPregDialog').show();"/>
                        <p:commandButton value="Cancelar" actionListener="#{loginMB.toCancelRespEdit}" update=":modPubPregDialogForm:pgModPubPreg" oncomplete="PF('modPubPregDialog').show();" />
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="respPregDlg" header="Responder Pregunta" widgetVar="respPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="false" style="font-size: 10px;">
                <h:form id="respPregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgRespPreg"  columns="2" width="500px">

                        <h:outputLabel id="msjusue" value="Mensaje del usuario:" rendered="#{loginMB.getfMsjUsu2()}"/>
                        <p:inputTextarea id="msjusut"  value="#{loginMB.selectedPregunta.vmsjusuario2}" rows="4" cols="66" style="font-weight: normal;"
                                         readonly="#{loginMB.getfMsjUsu2()}"  maxlength="400" counterTemplate="{0} caracteres restantes." rendered="#{loginMB.getfMsjUsu2()}"/>
                        <h:outputLabel id="msjespe"  value="Mensaje del Especialista:" rendered="#{loginMB.getfSInfEspe()}"/>
                        <p:inputTextarea id="msjespt" value="#{loginMB.selectedPregunta.vmsjespecialista}" rows="4" cols="66" style="font-weight: normal;"
                                         readonly="#{loginMB.getfSInfEspe()}"  maxlength="400" counterTemplate="{0} caracteres restantes." rendered="#{loginMB.getfSInfEspe()}"/>                          

                        <h:outputLabel value="Categoría:"/>
                        <h:panelGrid  columns="2">
                            <h:outputText id="cat" value="#{loginMB.selectedPregunta.ncategoriaid}" >
                                <f:converter converterId="converterCategoria"/>
                            </h:outputText>
                            <p:commandButton value="Seleccionar Categoría" actionListener="#{loginMB.loadTree}" oncomplete="PF('catPregDialog').show();" update=":catPregDialogForm:pgCatPreg" />    
                        </h:panelGrid>

                        <h:outputLabel value="Asunto:"/>
                        <h:outputLabel value="#{loginMB.selectedPregunta.vasunto}"  />

                        <h:outputLabel value="Detalle:"/>
                        <h:outputText value="#{loginMB.selectedPregunta.vdetalle}"/>

                        <h:outputLabel value="Respuesta"/>
                        <h:panelGrid columns="1" cellspacing="0" cellpadding="0">
                            <p:inputTextarea value="#{loginMB.selectedPregunta.vrespuesta}" rows="4" cols="66" style="font-weight: normal;"
                                             counter="display" maxlength="400" counterTemplate="{0} caracteres restantes." />
                            <h:outputText id="display"/>
                        </h:panelGrid>

                        <h:outputLabel value="Entidad:"/>
                        <h:outputText value="MEF"/>

                        <h:outputLabel value="Dato adicional:"/>
                        <h:outputText id="tema" value="#{loginMB.selectedPregunta.vdatoadicional}" />
                        <p:watermark for="tema" value="(Opcional)"/>

                    </h:panelGrid>
                    <br></br>
                    <h:panelGrid columns="3" style="padding-left: 55px">
                        <p:commandButton value="Editar" actionListener="#{loginMB.toEdit}" update=":editRespPregDialogForm:pgEditRespPreg" oncomplete="PF('editRespPregDialog').show();" />
                        <p:commandButton value="Responder" actionListener="#{loginMB.Responder}" update=":asgDialogForm:tbl, :rcbDialogForm:tbl, :srvDialogForm:tbl"/>
                        <p:commandButton value="Solicitar Informacion Adicional" actionListener="#{loginMB.toSi}" update=":siPregDialogForm:pgSiPreg" oncomplete="PF('siPregDialog').show();" />
                    </h:panelGrid>

                    <h:panelGrid columns="2" style="padding-left: 110px">
                        <p:commandButton value="Derivar Especialista"  actionListener="#{loginMB.loadTree}" oncomplete="PF('catPregDialog').show();" update=":catPregDialogForm:pgCatPreg" />
                        <p:commandButton value="Cancelar" actionListener="#{loginMB.toCancel}" />
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="editRespPregDlg" header="Editar Pregunta" widgetVar="editRespPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="false" style="font-size: 10px;">
                <h:form id="editRespPregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgEditRespPreg"  columns="2" width="500px">

                        <h:outputLabel value="Categoría:"/>
                        <h:panelGrid  columns="2">
                            <h:outputText id="catedit" value="#{loginMB.selectedPregunta.ncategoriaid}" >
                                <f:converter converterId="converterCategoria"/>
                            </h:outputText>
                            <p:commandButton value="Seleccionar Categoría" actionListener="#{loginMB.loadTree}" oncomplete="PF('catPregDialog').show();" update=":catPregDialogForm:pgCatPreg" />    
                        </h:panelGrid>

                        <h:outputLabel value="Asunto:"/>
                        <p:inputText size="99" value="#{loginMB.selectedPregunta.vasunto}"  maxlength="80"/>

                        <h:outputLabel value="Detalle:"/>
                        <h:panelGrid columns="1" cellspacing="0" cellpadding="0">
                            <p:inputTextarea value="#{loginMB.selectedPregunta.vdetalle}" rows="4" cols="66" style="font-weight: normal;"
                                             counter="displayd" maxlength="400" counterTemplate="{0} caracteres restantes." />
                            <h:outputText id="displayd"/>
                        </h:panelGrid>

                        <h:outputLabel value="Entidad" style="text-decoration: underline"/>
                        <p:spacer/>

                        <h:panelGrid columns="3">
                            <h:outputLabel value="NM:"/>
                            <p:inputText size="5" value="#{loginMB.entidadId}" maxlength="5"/>
                            <p:commandButton actionListener="#{loginMB.toEnt}" icon="ui-icon-search" update="ent"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <h:outputLabel value="Nombre:"/>
                            <p:inputText id="ent" size="50" value="#{loginMB.entidad}"/>  
                        </h:panelGrid>

                        <h:outputLabel value="Dato adicional:"/>
                        <p:inputText id="tema" size="99" value="#{loginMB.selectedPregunta.vdatoadicional}" maxlength="80"/>

                    </h:panelGrid>
                    <br></br>
                    <br></br>
                    <h:panelGrid columns="2" width="100%">
                        <p:commandButton value="Guardar" actionListener="#{loginMB.saveRespEdit}" update=":respPregDialogForm:pgRespPreg" oncomplete="PF('respPregDialog').show();"/>
                        <p:commandButton value="Cancelar" actionListener="#{loginMB.toCancelRespEdit}" update=":respPregDialogForm:pgRespPreg" oncomplete="PF('respPregDialog').show();" />
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="siPregDlg" header="Solicitar Informacion Adicional" widgetVar="siPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" style="font-size: 10px;">
                <h:form id="siPregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgSiPreg"  columns="2">
                        <h:outputLabel value="Mensaje:"/>
                        <h:panelGrid columns="1" cellspacing="0" cellpadding="0">
                            <p:inputTextarea value="#{loginMB.selectedPregunta.vmsjespecialista}" rows="4" cols="66" style="font-weight: normal;"
                                             readonly="#{loginMB.getfSInfEspe()}" counter="display" maxlength="400" counterTemplate="{0} caracteres restantes."/>
                            <h:outputText id="display"/>
                        </h:panelGrid>
                        <p:spacer/>
                        <h:panelGrid style="float: right" columns="2" width="25%">
                            <p:commandButton value="Enviar" actionListener="#{loginMB.sendSi}" update=":respPregDialogForm:pgRespPreg, :asgDialogForm:tbl, :rcbDialogForm:tbl, :srvDialogForm:tbl" />
                            <p:commandButton value="Cancelar" actionListener="#{loginMB.toCancelSi}"/>
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="respUsuPregDlg" header="Responder al Especialista" widgetVar="respUsuPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" style="font-size: 10px;">
                <h:form id="respUsuPregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgRespUsuPreg"  columns="2">
                        <h:outputLabel value="Mensaje:"/>
                        <h:panelGrid columns="1" cellspacing="0" cellpadding="0">
                            <p:inputTextarea value="#{loginMB.selectedPregunta.vmsjusuario2}" rows="4" cols="66" style="font-weight: normal;"
                                             readonly="#{loginMB.getfMsjUsu2()}" counter="display" maxlength="400" counterTemplate="{0} caracteres restantes."/>
                            <h:outputText id="display"/>
                        </h:panelGrid>
                        <p:spacer/>
                        <h:panelGrid style="float: right" columns="2" width="25%">
                            <p:commandButton value="Enviar" actionListener="#{loginMB.sendUsu}" update=":seePregDialogForm:pgSeePreg, :asgDialogForm:tbl, :rcbDialogForm:tbl, :srvDialogForm:tbl" />
                            <p:commandButton value="Cancelar" actionListener="#{loginMB.toCancelRespUsu}" />
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </p:dialog>

            <p:dialog id="respModPregDlg" header="Responder al Moderador" widgetVar="respModPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" style="font-size: 10px;">
                <h:form id="respModPregDialogForm">
                    <p:messages id="msgs" showSummary="true" showDetail="true" />
                    <h:panelGrid id="pgRespModPreg"  columns="2">
                        <h:outputLabel value="Mensaje:"/>
                        <h:panelGrid columns="1" cellspacing="0" cellpadding="0">
                            <p:inputTextarea value="#{loginMB.selectedPregunta.vmsjusuario1}" rows="4" cols="66" style="font-weight: normal;"
                                             readonly="#{loginMB.getfMsjUsu1()}" counter="display" maxlength="400" counterTemplate="{0} caracteres restantes."/>
                            <h:outputText id="display"/>
                        </h:panelGrid>
                        <p:spacer/>
                        <h:panelGrid style="float: right" columns="2" width="25%">
                            <p:commandButton value="Enviar" actionListener="#{loginMB.sendUsuMod}" update=":seePregDialogForm:pgSeePreg, :asgDialogForm:tbl, :rcbDialogForm:tbl, :srvDialogForm:tbl" />
                            <p:commandButton value="Cancelar" actionListener="#{loginMB.toCancelRespUsuMod}" />
                        </h:panelGrid>
                    </h:panelGrid>
                </h:form>
            </p:dialog>



            <p:dialog id="catPregDlg" header="Seleccionar Categoría" widgetVar="catPregDialog" modal="true" appendTo="@(body)" showEffect="fade" hideEffect="fade" resizable="false" closable="true" style="font-size: 10px;">
                <h:form id="catPregDialogForm">
                    <h:panelGrid id="pgCatPreg" columns="1">
                        <h:outputText value="Categorias" style="font-weight: bold; text-decoration: underline;"/>
                        <p:tree id="cats" value="#{loginMB.tree}" var="node" animate="true" cache="true"  
                                selectionMode="single" style="width: 100%;border: 0;" dynamic="true" highlight="true">
                            <p:ajax event="select" listener="#{loginMB.onNodeSelect}" oncomplete="PF('catDialog').hide();" update=":respPregDialogForm:cat,editRespPregDialogForm:catedit,editPregDialogForm:catedit" />
                            <p:treeNode expandedIcon="ui-icon ui-icon-folder-open" collapsedIcon="ui-icon ui-icon-folder-collapsed">
                                <h:outputText value="#{node.vnombre}"/>
                            </p:treeNode>
                        </p:tree>
                    </h:panelGrid>
                </h:form>
            </p:dialog>





        </div>
    </div>

</ui:composition>
